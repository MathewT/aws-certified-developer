# EC2 101

## EC2 Options

1. On Demand:  Fixed rate by the hour with no commitments.
  * Usage scenarios:  
    * Flexibility; no long term commitments;
    * Short term applications; spiky or unpredictable workloads that cannot be interrupted
    * Applications being developed or tested for the first time; dev/text
      environments

      Use on demand instances to supplement reserved instances during usage spikes


1. Reserved:  reserve capacity  1 or 3 year terms.
  * Usage scenarios:
    * Applications that are in steady state or predictable usage
    * Users are able to make up front payments for 1 or 3 years
    * E.g. You have 10K "regular" users requiring 2 large instances but require extra instances (on demand) for 
    Black Friday traffic

1. Spot:  bid whatever price you want for instance capacity; if the market price
   goes above your bid, you are given an hour notice and Amazon terminates the
   instance.
   * Usage scenarios:
     * Applications that have flexible start and end times
     * Applications that are only feasible at very low compute prices
     * Users with urgent computing needs for large amounts of additional capacity
     * Most commercially feasible
     * **Spot instances terminated by AWS, no charge for the hour**
     * **Spot instances terminated by you, you are charged for the hour**

1. Dedicated hosts:  Dedicated physical EC2 instances
  * Usage scenarios:
    * Dedicated servers needed for existing per-server license
    * Regulatory requirements that forbid multi-tenant virtualization
    * Can be purchased On Demand (hourly) or Reserved 


## EC2 Instance Families

![EC2 Instance Families](https://github.com/MathewT/aws-certified-developer/blob/master/EC2/instance-families.png)


## EBS Elastic Block storage
  1. S3 is object storage.  
  1. EBS is block storage for creating storage volumes that
    can be attached to EC2 instances.   
  1. Once the EBS-based storage vol attached to an EC2 instance, you can
    create a file system on top of these volumes, run a database or use them in
    any way you would use a block device.   
  1. EBS volumes are placed in specific availability zones where they are automatically
    replicated.
  1. Think: Disk in the cloud.
  1. One EC2 can attach multiple EBS volumes.
**EBS Types**
  1. GP2 - General Purpose SSD
    * Designed for 99.999 availability
    * Ratio of 3 IOPS per GB, up to 10,000 IOPS, burst to 3000 for short 
    periods for volumes under 1GB
  1. IO1 - Provisioned IOPS
    * For I/O intensive applications, large relational or NoSQL databases,
    * For more than 10,000 IOPS
  1. Magnetic (Standard)
    * Slowest 
    * Lowest cost per GB


## Install AWSCLI

```sudo apt-get install python2.7```

```sudo apt-get install libssl-dev```

```sudo apt-get install python-pip```

```sudo pip install --upgrade pip```

```sudo pip install awscli```

http://docs.aws.amazon.com/cli/latest/userguide/installing.html#install-with-pip


## Install RVM, Ruby, AWS SDK

```sudo apt-get install git-core vim libssl-dev```

```gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3```

```curl -L https://get.rvm.io | bash -s stable```

```source ~/.rvm/scripts/rvm```

```echo "source ~/.rvm/scripts/rvm" >> ~/.bashrc```

```rvm install 2.3.3```

AWS SDK Documentation for Ruby:  http://docs.aws.amazon.com/sdk-for-ruby/v2/developer-guide/

