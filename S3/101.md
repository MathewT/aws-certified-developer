# S3 101 (Just the important stuff.)

Files are between 1 byte and 5 terabytes.

Buckets must be unique globally, across regions and availability zones.

S3 stores data in alphabetical order (lexigraphical order).
 - make sure object names are not all beginning with same letters, may want to
 salt the beginning of object names to prevent hot spots.


## Important Exam Notes

1. Read after Write consistency for PUTS of *new* objects.  New objects are
        immediately available for read after first PUT.  
2. Eventual consistency for overwrite PUTS and DELETEs (Updates to objects via PUT
or DELETE can take some time to propagate.)
3. S3 is a simple key/value store.  
  * The *key* is the path/name of the object.
  * The *value* is the actual bytes of the data/file being stored.
  * Version ID is important for tracking value/data version.  
  * Metadata
  * Access Control Lists
4. Amazon guarantees 99.99 availability.
5. Tiered storage
6. Life cycle management
7. Versioning
8. Data encryption
9. Securing Data with ACLs and Bucket policies
10. Bucket URL format: https://s3-region.amazonaws.com/bucket-name
11. Largest size file you can transfer to S3 in a PUT operation is 5GB


## Access Control Lists (ACLs)

**need content here!**

## Bucket Policies

**need content here!**

## Versioning

1. Enabled at the bucket level.
2. Once enabled, it cannot be turned off or disabled, only suspended
3. Versioning allows for MFA delete capability for additional security
4.

## Replication

1. Auto replicate to another bucket
2. Cross region replication, **requires versioning on both buckets**

## S3 Storage Tiers or Classes
  1. S3
    * 99.99% availability
    * 11 9s durability
    * Most expensive
  2. S3 IA (Infrequently Accessed)
    * Data objects that are accessed less frequently but requires rapid
      access when needed.   
    * Lower fee than S3 **but you are charged a retrieval fee**
  3. Reduced Redundancy Storage (RRS)
    * 99.99% durability
    * 99.99% availability over a given year
    * Used to store data that can be lost or easily regenerated (e.g. image
      thumbnails)
  4. Glacier
    * Very cheap
    * Archival only
    * **3-5 hours to retrieve data**


## S3 Charges
  1. Storage
  2. Requests
  3. Transfer


## Lifecyle Management Rules

1. S3 Standard to IA Transition:
  * 128Kb minimum size
  * 30 days after object creation

2. Transition to Glacier:
  * 1 day after object creation
  * 30 days after transition to IA (60 days after object creation)

3. Transition to Delete:
  * 1 day after object creation OR 1 day after transition to Glacier (61 days after
    object creation)

5. Can be used in conjunction with versioning.

6. Can be applied to current versions and previous versions of objects
